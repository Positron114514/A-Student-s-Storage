#软件工程与计算 #程序设计 #python 

> [[../SICP/1. 构造过程和抽象#1.3 用高阶函数做抽象|高阶过程 in SICP]]
> 课件: [[../钮老师课件/06 - 1 编程实践-高阶函数.pdf|06 - 1 编程实践-高阶函数]]

函数是 "一等" 的, 可以像值一样被操作

一等公民就是一个程序实体，其可以支持所有其他程序实体 可行的一般操作（如作为参数、作为返回值、被绑定到某个名字上）

- 用高阶函数可以设计出更好的函数

高阶函数: (and / or)

- 将函数作为实参的函数
- 返回值是一个函数

# 1. 函数作为实参

Example: 计算多边形面积

```python
def get_area(r, shape_constant):
	return shape_constant * r * r

def area_circle(r):
	return get_area(r, pi)
```

求级数:

```python
def summation(n, way):
	ret = 0
	for i in range(1, n + 1):
		ret += way(i)
	return ret

def square_summation(n):
	return summation(n, lambda x: x * x)

def plain_summation(n):
	return summation(n, lambda x: x)

def cube_summation(n):
	return summation(n, lambda x: x ** 3)

def pi_summation(n):
	def get_pi(k):
		return 8 / ((4 * k - 3) * (4 * k - 1))
	return summation(n, get_pi)
```

From SICP

![[../SICP/1. 构造过程和抽象#抽象和第一级过程|1. 构造过程和抽象]]


# 2. 函数作为返回值

**本地定义的函数** : 可以在函数里定义函数

```python
def genshin(n):
	def play_genshin(n):
		return n * n
	return play_genshin
```

python 的机制: 闭包, 可以找到返回之后的帧中的变量 会把需要的东西一起返回